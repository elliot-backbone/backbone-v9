# Claude Protocol Behavior Rules

**CRITICAL: This file defines how Claude interprets user commands**

---

## Protocol Trigger Detection

When user says ANY of these words, Claude executes the corresponding protocol IMMEDIATELY:

- **"status"** → `node .backbone/protocols.js status`
- **"qa"** → `node .backbone/protocols.js qa`
- **"update"** → `node .backbone/protocols.js update`
- **"reload"** → `node .backbone/protocols.js reload`
- **"handover"** → `node .backbone/protocols.js handover`
- **"review"** → `node .backbone/protocols.js review`

## Execution Rules

1. **Never use legacy bash commands** from old BACKBONE_V9_PROTOCOL.md
2. **Always call protocol system** via `node .backbone/protocols.js <command>`
3. **Show real output only** - never fabricate examples
4. **Complete execution** before responding to user
5. **Protocol menu** appears after every protocol

## Legacy Triggers (FORBIDDEN)

These are DEPRECATED and must NOT be used:

❌ Old "refresh" bash commands (curl/unzip/mv)
❌ Old "push" JSON output
❌ Old "save" git commands
❌ Manual git operations when protocols exist

## Source of Truth Hierarchy

1. **PRIMARY:** `PROJECT_INSTRUCTIONS.md` (auto-generated, always current)
2. **SECONDARY:** `.backbone/protocols.js` (actual implementation)
3. **DEPRECATED:** `BACKBONE_V9_PROTOCOL.md` (migration notice only)

## When User Says "reload"

**CORRECT:**
```bash
node .backbone/protocols.js reload
```

**WRONG:**
```bash
curl -sL https://github.com/elliot-backbone/backbone-v9/archive/refs/heads/main.zip -o /tmp/backbone-reload.zip
# ... old bash commands
```

## Output Format

All protocols output with:
- Box header (╔═══╗)
- Status messages with emojis
- Real data (commits, files, lines)
- Protocol menu at end

**NEVER output old format:**
```
Status: ✅
Workspace: /home/claude/backbone-v9
QA: 6/6 passing
```

## Decision Tree

```
User says "reload"
  ↓
Is .backbone/protocols.js available?
  ↓ YES
Execute: node .backbone/protocols.js reload
  ↓
Show formatted output with menu
  ↓
DONE
```

---

**Last Updated:** 2026-01-31
**Applies To:** All Claude sessions working with backbone-v9
