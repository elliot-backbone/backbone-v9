# Claude Protocol Behavior Rules

**CRITICAL: This file defines how Claude interprets user commands**

---

## Protocol Trigger Detection

When user says ANY of these words, Claude executes the corresponding protocol IMMEDIATELY:

- **"reload"** → Pull fresh from backbone-v9 repo, run QA, output status
- **"status"** → `node .backbone/protocols.js status`
- **"qa"** → `node .backbone/protocols.js qa`
- **"update"** → `node .backbone/protocols.js update`
- **"handover"** → `node .backbone/protocols.js handover`
- **"review"** → `node .backbone/protocols.js review`

## Reload Protocol (Primary)

**"reload"** is the canonical way to pull fresh code. It executes:

```bash
curl -sL https://api.github.com/repos/elliot-backbone/backbone-v9/zipball/main -o /home/claude/repo.zip
rm -rf /home/claude/backbone-v9
unzip -o /home/claude/repo.zip -d /home/claude/
mv /home/claude/elliot-backbone-backbone-v9-* /home/claude/backbone-v9
node /home/claude/backbone-v9/qa/qa_gate.js
```

Output format:
```
Status: [✅/❌]
Workspace: /home/claude/backbone-v9
QA: [N]/[N] passing
Files: [count] ([lines] lines)
Commit: [hash]
```

## Execution Rules

1. **Always pull from backbone-v9** - https://github.com/elliot-backbone/backbone-v9
2. **Show real output only** - never fabricate examples
3. **Complete execution** before responding to user
4. **Protocol menu** appears after every protocol (when using .backbone/protocols.js)

## Legacy Triggers (FORBIDDEN)

These are DEPRECATED and must NOT be used:

❌ "refresh" - consolidated into "reload"
❌ Old "push" JSON output
❌ Old "save" git commands
❌ References to elliot-backbone/01-27 repo

## Source of Truth Hierarchy

1. **PRIMARY:** `.backbone/source-of-truth.js` (all URLs/references)
2. **SECONDARY:** `.backbone/protocols.js` (actual implementation)
3. **GENERATED:** `PROJECT_INSTRUCTIONS.md` (auto-generated from above)

---

**Last Updated:** 2026-01-31
**Applies To:** All Claude sessions working with backbone-v9
**Canonical Repo:** https://github.com/elliot-backbone/backbone-v9
